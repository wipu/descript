<h2>Asserting output of cmd</h2>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>die() <img width="0" />{ <img width="0" />html <img width="0" />"died: <img width="0" />$@"; <img width="0" />}
</span></div>
<div class='console output'></div>
<p class='text'>
Function out-was can be used to assert cmd output
</p>
<p class='text'>
First, the empty case, success:
</p>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>true
</span></div>
<div class='console output'></div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
<p class='text'>
And failure:
</p>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>true
</span></div>
<div class='console output'></div>
died: Error in command output, see diff output for details.<div><span class='output-asserted'><i>Output asserted</i></span></div>
<p class='text'>
Then non-empty:
</p>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>echo <img width="0" />"non-empty <img width="0" />output"
</span></div>
<div class='console output'>non-empty <img width="0" />output
</div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>echo <img width="0" />"actual"
</span></div>
<div class='console output'>actual
</div>
died: Error in command output, see diff output for details.<div><span class='output-asserted'><i>Output asserted</i></span></div>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>die() <img width="0" />{ <img width="0" />errorlog <img width="0" />"$@"; <img width="0" />exit <img width="0" />1; <img width="0" />}
</span></div>
<div class='console output'></div>
<p class='text'>
stdout and stderr get combined. TODO is there a way to interleave them naturally but still assert them separately?
</p>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>echo <img width="0" />err <img width="0" />> <img width="0" />/dev/stderr
</span></div>
<div class='console output'>err
</div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>echo <img width="0" />out <img width="0" />>> <img width="0" />/dev/stdout <img width="0" />&amp;&amp; <img width="0" />echo <img width="0" />err <img width="0" />>> <img width="0" />/dev/stderr
</span></div>
<div class='console output'>out<br/>
err
</div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
<p class='text'>
Since descript uses files to capture output, append is necessary:
</p>
<div class='console'><span class='prompt'>~ $ </span><span class='cmd'>echo <img width="0" />out <img width="0" />> <img width="0" />/dev/stdout <img width="0" />&amp;&amp; <img width="0" />echo <img width="0" />err <img width="0" />> <img width="0" />/dev/stderr
</span></div>
<div class='console output'>err
</div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
