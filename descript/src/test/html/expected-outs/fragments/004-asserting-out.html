<h2>Asserting output of cmd</h2>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />d<img width="0" />i<img width="0" />e<img width="0" />(<img width="0" />)<img width="0" /> <img width="0" />{<img width="0" /> <img width="0" />h<img width="0" />t<img width="0" />m<img width="0" />l<img width="0" /> <img width="0" />"<img width="0" />d<img width="0" />i<img width="0" />e<img width="0" />d<img width="0" />:<img width="0" /> <img width="0" />$<img width="0" />@<img width="0" />"<img width="0" />;<img width="0" /> <img width="0" />}<img width="0" />
</span></div>
<div class='console output'><img width="0" /></div>
<p class='text'>
Function out-was can be used to assert cmd output
</p>
<p class='text'>
First, the empty case, success:
</p>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />t<img width="0" />r<img width="0" />u<img width="0" />e<img width="0" />
</span></div>
<div class='console output'><img width="0" /></div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
<p class='text'>
And failure:
</p>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />t<img width="0" />r<img width="0" />u<img width="0" />e<img width="0" />
</span></div>
<div class='console output'><img width="0" /></div>
died: Error in command output, see diff output for details.<div><span class='output-asserted'><i>Output asserted</i></span></div>
<p class='text'>
Then non-empty:
</p>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />e<img width="0" />c<img width="0" />h<img width="0" />o<img width="0" /> <img width="0" />"<img width="0" />n<img width="0" />o<img width="0" />n<img width="0" />-<img width="0" />e<img width="0" />m<img width="0" />p<img width="0" />t<img width="0" />y<img width="0" /> <img width="0" />o<img width="0" />u<img width="0" />t<img width="0" />p<img width="0" />u<img width="0" />t<img width="0" />"<img width="0" />
</span></div>
<div class='console output'><img width="0" />n<img width="0" />o<img width="0" />n<img width="0" />-<img width="0" />e<img width="0" />m<img width="0" />p<img width="0" />t<img width="0" />y<img width="0" /> <img width="0" />o<img width="0" />u<img width="0" />t<img width="0" />p<img width="0" />u<img width="0" />t<img width="0" />
</div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />e<img width="0" />c<img width="0" />h<img width="0" />o<img width="0" /> <img width="0" />"<img width="0" />a<img width="0" />c<img width="0" />t<img width="0" />u<img width="0" />a<img width="0" />l<img width="0" />"<img width="0" />
</span></div>
<div class='console output'><img width="0" />a<img width="0" />c<img width="0" />t<img width="0" />u<img width="0" />a<img width="0" />l<img width="0" />
</div>
died: Error in command output, see diff output for details.<div><span class='output-asserted'><i>Output asserted</i></span></div>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />d<img width="0" />i<img width="0" />e<img width="0" />(<img width="0" />)<img width="0" /> <img width="0" />{<img width="0" /> <img width="0" />e<img width="0" />r<img width="0" />r<img width="0" />o<img width="0" />r<img width="0" />l<img width="0" />o<img width="0" />g<img width="0" /> <img width="0" />"<img width="0" />$<img width="0" />@<img width="0" />"<img width="0" />;<img width="0" /> <img width="0" />e<img width="0" />x<img width="0" />i<img width="0" />t<img width="0" /> <img width="0" />1<img width="0" />;<img width="0" /> <img width="0" />}<img width="0" />
</span></div>
<div class='console output'><img width="0" /></div>
<p class='text'>
stdout and stderr get combined. TODO is there a way to interleave them naturally but still assert them separately?
</p>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />e<img width="0" />c<img width="0" />h<img width="0" />o<img width="0" /> <img width="0" />e<img width="0" />r<img width="0" />r<img width="0" /> <img width="0" />><img width="0" /> <img width="0" />/<img width="0" />d<img width="0" />e<img width="0" />v<img width="0" />/<img width="0" />s<img width="0" />t<img width="0" />d<img width="0" />e<img width="0" />r<img width="0" />r<img width="0" />
</span></div>
<div class='console output'><img width="0" />e<img width="0" />r<img width="0" />r<img width="0" />
</div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />e<img width="0" />c<img width="0" />h<img width="0" />o<img width="0" /> <img width="0" />o<img width="0" />u<img width="0" />t<img width="0" /> <img width="0" />><img width="0" />><img width="0" /> <img width="0" />/<img width="0" />d<img width="0" />e<img width="0" />v<img width="0" />/<img width="0" />s<img width="0" />t<img width="0" />d<img width="0" />o<img width="0" />u<img width="0" />t<img width="0" /> <img width="0" />&amp;&amp; <img width="0" />e<img width="0" />c<img width="0" />h<img width="0" />o<img width="0" /> <img width="0" />e<img width="0" />r<img width="0" />r<img width="0" /> <img width="0" />><img width="0" />><img width="0" /> <img width="0" />/<img width="0" />d<img width="0" />e<img width="0" />v<img width="0" />/<img width="0" />s<img width="0" />t<img width="0" />d<img width="0" />e<img width="0" />r<img width="0" />r<img width="0" />
</span></div>
<div class='console output'><img width="0" />o<img width="0" />u<img width="0" />t<img width="0" /><br/>
e<img width="0" />r<img width="0" />r<img width="0" />
</div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
<p class='text'>
Since descript uses files to capture output, append is necessary:
</p>
<div class='console'><span class='prompt'><img width="0" />~<img width="0" /> $ </span><span class='cmd'><img width="0" />e<img width="0" />c<img width="0" />h<img width="0" />o<img width="0" /> <img width="0" />o<img width="0" />u<img width="0" />t<img width="0" /> <img width="0" />><img width="0" /> <img width="0" />/<img width="0" />d<img width="0" />e<img width="0" />v<img width="0" />/<img width="0" />s<img width="0" />t<img width="0" />d<img width="0" />o<img width="0" />u<img width="0" />t<img width="0" /> <img width="0" />&amp;&amp; <img width="0" />e<img width="0" />c<img width="0" />h<img width="0" />o<img width="0" /> <img width="0" />e<img width="0" />r<img width="0" />r<img width="0" /> <img width="0" />><img width="0" /> <img width="0" />/<img width="0" />d<img width="0" />e<img width="0" />v<img width="0" />/<img width="0" />s<img width="0" />t<img width="0" />d<img width="0" />e<img width="0" />r<img width="0" />r<img width="0" />
</span></div>
<div class='console output'><img width="0" />e<img width="0" />r<img width="0" />r<img width="0" />
</div>
<div><span class='output-asserted'><i>Output asserted</i></span></div>
